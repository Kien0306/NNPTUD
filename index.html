<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Dashboard Ultimate</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            /* Tạo nền Gradient chuyển động */
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            padding-top: 20px;
        }

        /* Hiệu ứng chuyển động màu nền */
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Card chính: Hiệu ứng kính mờ (Glassmorphism) */
        .main-card {
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            /* Màu trắng trong suốt */
            background: rgba(255, 255, 255, 0.85); 
            /* Làm mờ nền đằng sau */
            backdrop-filter: blur(10px); 
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            padding: 30px;
        }

        h2 {
            color: #2c3e50;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Ảnh sản phẩm */
        .product-img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            background-color: #fff;
        }
        .product-img:hover {
            transform: scale(1.8);
            z-index: 10;
            position: relative;
        }

        /* Bảng dữ liệu */
        .table-custom {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }
        .table thead {
            background: #2c3e50; /* Màu tối sang trọng */
            color: white;
        }
        .table thead th {
            background: transparent;
            color: white;
            border: none;
            font-weight: 500;
            text-transform: uppercase;
            font-size: 0.85rem;
        }

        /* Hàng trong bảng */
        .table tbody tr {
            transition: all 0.2s;
        }
        .table tbody tr:hover {
            background-color: #f1f8ff;
            transform: scale(1.01);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* Nút phân trang */
        .page-link {
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 3px;
            border: none;
            color: #2c3e50;
            font-weight: 500;
        }
        .page-item.active .page-link {
            background-color: #23a6d5;
            color: white;
            box-shadow: 0 2px 5px rgba(35, 166, 213, 0.4);
        }

        /* Modal làm đẹp */
        .modal-content {
            border-radius: 20px;
            border: none;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }
        .modal-header {
            background: linear-gradient(to right, #23a6d5, #23d5ab);
            color: white;
            border-radius: 20px 20px 0 0;
        }
        .btn-close-white {
            filter: invert(1) grayscale(100%) brightness(200%);
        }

        /* Cột sắp xếp */
        .sortable {
            cursor: pointer;
        }
        .sortable:hover i {
            color: #23d5ab;
        }
    </style>
</head>
<body>

    <div class="container mb-5">
        <div class="main-card">
            <h2 class="text-center mb-5">
                <i class="fa-solid fa-layer-group text-primary me-2"></i> Product Dashboard
            </h2>

            <div class="row mb-4 g-3 align-items-center">
                <div class="col-md-5">
                    <div class="input-group shadow-sm rounded-pill overflow-hidden">
                        <span class="input-group-text bg-white border-0 ps-3"><i class="fa-solid fa-search text-muted"></i></span>
                        <input type="text" id="searchInput" class="form-control border-0 py-2" placeholder="Tìm kiếm sản phẩm...">
                    </div>
                </div>
                
                <div class="col-md-2">
                    <select id="pageSize" class="form-select border-0 shadow-sm rounded-pill text-center" style="cursor: pointer;">
                        <option value="5">5 dòng</option>
                        <option value="10" selected>10 dòng</option>
                        <option value="20">20 dòng</option>
                    </select>
                </div>

                <div class="col-md-5 text-md-end text-center">
                    <button class="btn btn-success rounded-pill px-4 me-2 shadow hover-scale" onclick="openCreateModal()">
                        <i class="fa-solid fa-plus-circle"></i> Thêm mới
                    </button>
                    <button class="btn btn-primary rounded-pill px-4 shadow hover-scale" onclick="exportToCSV()">
                        <i class="fa-solid fa-download"></i> CSV
                    </button>
                </div>
            </div>

            <div class="table-custom">
                <table class="table align-middle mb-0">
                    <thead>
                        <tr>
                            <th class="py-3 ps-4">ID</th>
                            <th class="py-3 sortable" onclick="handleSort('title')">
                                Title <i id="sort-title-icon" class="fa-solid fa-sort ms-1 opacity-50"></i>
                            </th>
                            <th class="py-3 sortable" onclick="handleSort('price')">
                                Price <i id="sort-price-icon" class="fa-solid fa-sort ms-1 opacity-50"></i>
                            </th>
                            <th class="py-3">Category</th>
                            <th class="py-3 text-center">Image</th>
                            <th class="py-3 text-end pe-4">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="productTableBody">
                        </tbody>
                </table>
            </div>

            <nav class="mt-4 pt-2 border-top">
                <ul class="pagination justify-content-center" id="pagination">
                    </ul>
            </nav>
        </div>
    </div>

    <div class="modal fade" id="detailModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold"><i class="fa-solid fa-circle-info me-2"></i>Chi tiết sản phẩm</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <div class="row">
                        <div class="col-md-5 text-center mb-3 mb-md-0 d-flex align-items-center justify-content-center bg-light rounded-3">
                            <img id="detailImage" src="" class="img-fluid rounded shadow-sm" style="max-height: 200px;">
                        </div>
                        <div class="col-md-7">
                            <form id="editForm">
                                <input type="hidden" id="detailId">
                                <div class="mb-3">
                                    <label class="form-label text-muted small fw-bold">TÊN SẢN PHẨM</label>
                                    <input type="text" class="form-control fw-bold border-0 bg-light" id="detailTitle" disabled>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label text-muted small fw-bold">GIÁ ($)</label>
                                    <input type="number" class="form-control text-success fw-bold border-0 bg-light" id="detailPrice" disabled>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label text-muted small fw-bold">MÔ TẢ</label>
                                    <textarea class="form-control border-0 bg-light" id="detailDescription" rows="3" disabled></textarea>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer bg-light border-0 rounded-bottom-4">
                    <button type="button" class="btn btn-outline-secondary rounded-pill px-4" data-bs-dismiss="modal">Đóng</button>
                    <button type="button" class="btn btn-warning rounded-pill px-4 text-white shadow-sm" id="btnEnableEdit" onclick="enableEditMode()">
                        <i class="fa-solid fa-pen"></i> Sửa
                    </button>
                    <button type="button" class="btn btn-primary rounded-pill px-4 shadow-sm d-none" id="btnSaveUpdate" onclick="updateProduct()">
                        <i class="fa-solid fa-save"></i> Lưu lại
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="createModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold"><i class="fa-solid fa-magic-wand-sparkles me-2"></i>Tạo mới</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="createForm">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control rounded-3" id="createTitle" placeholder="Tên" required>
                            <label>Tên sản phẩm</label>
                        </div>
                        <div class="row">
                            <div class="col-6 mb-3">
                                <div class="form-floating">
                                    <input type="number" class="form-control rounded-3" id="createPrice" placeholder="Giá" required>
                                    <label>Giá ($)</label>
                                </div>
                            </div>
                            <div class="col-6 mb-3">
                                <div class="form-floating">
                                    <input type="number" class="form-control rounded-3" id="createCategoryId" value="1" required>
                                    <label>Category ID</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-floating mb-3">
                            <textarea class="form-control rounded-3" id="createDescription" placeholder="Mô tả" style="height: 100px" required></textarea>
                            <label>Mô tả chi tiết</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="url" class="form-control rounded-3" id="createImage" placeholder="Link ảnh" required>
                            <label>Link ảnh (URL)</label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-0 pt-0">
                    <button type="button" class="btn btn-light rounded-pill px-4" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-success rounded-pill px-4 shadow" onclick="createProduct()">
                        <i class="fa-solid fa-check"></i> Hoàn tất
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>